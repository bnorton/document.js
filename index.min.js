!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.model=t()}}(function(){var t;return function e(t,i,n){function s(o,a){if(!i[o]){if(!t[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(r)return r(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[o]={exports:{}};t[o][0].call(c.exports,function(e){var i=t[o][1][e];return s(i?i:e)},c,c.exports,e,t,i,n)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(t,e,i){function n(t){return!isNaN(parseFloat(t))&&isFinite(t)}function s(){this.loaded&&(null===this.count?this.RSVP.error.call(this):this.RSVP.success.call(this,this.count))}t("progenitor.js")();var r=function(){};Count=Object.progeny("Count",{init:function(t){this.relation=t,this.count=null,this.loaded=!1,this.RSVP={success:r,error:r}},kept:function(t){this.count=n(t)?t:null,this.loaded=!0,s.call(this)},then:function(t,e){this.RSVP.success=t||r,this.RSVP.error=e||r,s.call(this)}}),i=e.exports=Count},{"progenitor.js":10}],2:[function(t,e,i){function n(t){return!isNaN(parseFloat(t))&&isFinite(t)}function s(){this.loaded&&(this.RSVP.wasKept?this.RSVP.success.call(this,this.RSVP.wasKept):this.RSVP.error.call(this))}RelationError=Error.progeny("RelationError",{init:function(t){this.name=this.className,this.message=t}});var r=t("extend"),o=function(){};Relation=Object.progeny("Relation",{init:function(t,e){this.modelClass=t,e?this.model=e:this._query={},this.loaded=!1,this.items=null,this.size=null,this.RSVP={success:o,error:o,wasKept:!1}},kept:function(t){this.loaded=!0,this.RSVP.wasKept=t,this.items=this.size=null,Array.isArray(t)?this.items=t:n(t)&&(this.size=t),s.call(this)},then:function(t,e){this.RSVP.success=t||o,this.RSVP.error=e||o,s.call(this)},query:function(){return this._query?r({},this._query):null},count:function(){var t=this,e=new Document.Count(this);return this.modelClass.adapter().count(function(i){t.loaded=!0,e.kept(i)}),e},find:function(t){var e=this;if(this.loaded=!1,this.model)return this.modelClass.adapter().where({_id:this.model.id},function(t){e.loaded=!0,t=Array.isArray(t)?e.model["class"].shortToLong(t[0]):t,e.model.kept(t)}),this.model;var i=this.modelClass;return t=i.longToShort(t),this.modelClass.adapter().where(t,function(t){Array.isArray(t)&&(t=t.map(function(t){var e=new i({_id:null});return e.kept(i.shortToLong(t)),e})),e.kept(t)}),this},asJSON:function(){return this.items?this.items.map(function(t){return t.asJSON()}):n(this.size)?this.size:null},create:function(t){var e=this;if(this.loaded=!1,!this.model)throw new RelationError("Non-model creates are not supported.");return t=this.modelClass.longToShort(t),this.modelClass.adapter().create(t,function(t){e.loaded=!0,t=e.model["class"].shortToLong(t),e.model.kept(t)}),this.model},update:function(t){var e=this;return this.loaded=!1,t=this.modelClass.longToShort(t),this.model?(this.modelClass.adapter().update({_id:this.model.id},t,function(t){e.loaded=!0,e.model.kept(t)}),this.model):(this.modelClass.adapter().update(this._query,t,function(t){e.kept(t)}),this)}}),i=e.exports=Relation},{extend:3}],3:[function(t,e,i){var n,s=Object.prototype.hasOwnProperty,r=Object.prototype.toString,o=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===r.call(t)},a=function(t){"use strict";if(!t||"[object Object]"!==r.call(t))return!1;var e=s.call(t,"constructor"),i=t.constructor&&t.constructor.prototype&&s.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!e&&!i)return!1;var o;for(o in t);return o===n||s.call(t,o)};e.exports=function u(){"use strict";var t,e,i,s,r,l,c=arguments[0],f=1,h=arguments.length,d=!1;for("boolean"==typeof c?(d=c,c=arguments[1]||{},f=2):("object"!=typeof c&&"function"!=typeof c||null==c)&&(c={});h>f;++f)if(t=arguments[f],null!=t)for(e in t)i=c[e],s=t[e],c!==s&&(d&&s&&(a(s)||(r=o(s)))?(r?(r=!1,l=i&&o(i)?i:[]):l=i&&a(i)?i:{},c[e]=u(d,l,s)):s!==n&&(c[e]=s));return c}},{}],4:[function(t,e,i){e.exports=function(t){t.plural(/$/,"s"),t.plural(/s$/i,"s"),t.plural(/(ax|test)is$/i,"$1es"),t.plural(/(octop|vir)us$/i,"$1i"),t.plural(/(octop|vir)i$/i,"$1i"),t.plural(/(alias|status)$/i,"$1es"),t.plural(/(bu)s$/i,"$1ses"),t.plural(/(buffal|tomat)o$/i,"$1oes"),t.plural(/([ti])um$/i,"$1a"),t.plural(/([ti])a$/i,"$1a"),t.plural(/sis$/i,"ses"),t.plural(/(?:([^f])fe|([lr])f)$/i,"$1ves"),t.plural(/(hive)$/i,"$1s"),t.plural(/([^aeiouy]|qu)y$/i,"$1ies"),t.plural(/(x|ch|ss|sh)$/i,"$1es"),t.plural(/(matr|vert|ind)(?:ix|ex)$/i,"$1ices"),t.plural(/([m|l])ouse$/i,"$1ice"),t.plural(/([m|l])ice$/i,"$1ice"),t.plural(/^(ox)$/i,"$1en"),t.plural(/^(oxen)$/i,"$1"),t.plural(/(quiz)$/i,"$1zes"),t.singular(/s$/i,""),t.singular(/(n)ews$/i,"$1ews"),t.singular(/([ti])a$/i,"$1um"),t.singular(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i,"$1sis"),t.singular(/(^analy)ses$/i,"$1sis"),t.singular(/([^f])ves$/i,"$1fe"),t.singular(/(hive)s$/i,"$1"),t.singular(/(tive)s$/i,"$1"),t.singular(/([lr])ves$/i,"$1f"),t.singular(/([^aeiouy]|qu)ies$/i,"$1y"),t.singular(/(s)eries$/i,"$1eries"),t.singular(/(m)ovies$/i,"$1ovie"),t.singular(/(x|ch|ss|sh)es$/i,"$1"),t.singular(/([m|l])ice$/i,"$1ouse"),t.singular(/(bus)es$/i,"$1"),t.singular(/(o)es$/i,"$1"),t.singular(/(shoe)s$/i,"$1"),t.singular(/(cris|ax|test)es$/i,"$1is"),t.singular(/(octop|vir)i$/i,"$1us"),t.singular(/(alias|status)es$/i,"$1"),t.singular(/^(ox)en/i,"$1"),t.singular(/(vert|ind)ices$/i,"$1ex"),t.singular(/(matr)ices$/i,"$1ix"),t.singular(/(quiz)zes$/i,"$1"),t.singular(/(database)s$/i,"$1"),t.irregular("child","children"),t.irregular("person","people"),t.irregular("man","men"),t.irregular("child","children"),t.irregular("sex","sexes"),t.irregular("move","moves"),t.irregular("cow","kine"),t.irregular("zombie","zombies"),t.uncountable(["equipment","information","rice","money","species","series","fish","sheep","jeans"])}},{}],5:[function(t,e,i){e.exports=function(e){var i=t("./methods");return e&&t("./native")(i),i}},{"./methods":7,"./native":8}],6:[function(t,e,i){var n=t("./util"),s=function(){return this.plurals=[],this.singulars=[],this.uncountables=[],this.humans=[],t("./defaults")(this),this};s.prototype.plural=function(t,e){"string"==typeof t&&(this.uncountables=n.array.del(this.uncountables,t)),this.uncountables=n.array.del(this.uncountables,e),this.plurals.unshift([t,e])},s.prototype.singular=function(t,e){"string"==typeof t&&(this.uncountables=n.array.del(this.uncountables,t)),this.uncountables=n.array.del(this.uncountables,e),this.singulars.unshift([t,e])},s.prototype.irregular=function(t,e){this.uncountables=n.array.del(this.uncountables,t),this.uncountables=n.array.del(this.uncountables,e),t[0].toUpperCase()==e[0].toUpperCase()?(this.plural(new RegExp("("+t[0]+")"+t.slice(1)+"$","i"),"$1"+e.slice(1)),this.plural(new RegExp("("+e[0]+")"+e.slice(1)+"$","i"),"$1"+e.slice(1)),this.singular(new RegExp("("+e[0]+")"+e.slice(1)+"$","i"),"$1"+t.slice(1))):(this.plural(new RegExp(""+t[0].toUpperCase()+t.slice(1)+"$"),e[0].toUpperCase()+e.slice(1)),this.plural(new RegExp(""+t[0].toLowerCase()+t.slice(1)+"$"),e[0].toLowerCase()+e.slice(1)),this.plural(new RegExp(""+e[0].toUpperCase()+e.slice(1)+"$"),e[0].toUpperCase()+e.slice(1)),this.plural(new RegExp(""+e[0].toLowerCase()+e.slice(1)+"$"),e[0].toLowerCase()+e.slice(1)),this.singular(new RegExp(""+e[0].toUpperCase()+e.slice(1)+"$"),t[0].toUpperCase()+t.slice(1)),this.singular(new RegExp(""+e[0].toLowerCase()+e.slice(1)+"$"),t[0].toLowerCase()+t.slice(1)))},s.prototype.human=function(t,e){this.humans.unshift([t,e])},s.prototype.uncountable=function(t){this.uncountables=this.uncountables.concat(t)},s.prototype.clear=function(t){switch(null==t&&(t="all"),t){case"all":this.plurals=[],this.singulars=[],this.uncountables=[],this.humans=[];default:this[t]=[]}},s.prototype["default"]=function(){return this.plurals=[],this.singulars=[],this.uncountables=[],this.humans=[],t("./defaults")(this),this},e.exports=new s},{"./defaults":4,"./util":9}],7:[function(t,e,i){var n=t("./util"),s=e.exports;s.inflections=t("./inflections"),s.inflect=function(t){t(s.inflections)},s.camelize=function(t,e){var i;return null==e&&(e=!0),i=n.string.gsub(t,/\/(.?)/,function(t){return"."+n.string.upcase(t[1])}),i=n.string.gsub(i,/(?:_)(.)/,function(t){return n.string.upcase(t[1])}),e?n.string.upcase(i):n.string.downcase(i)},s.underscore=function(t){var e;return e=n.string.gsub(t,/\./,"/"),e=n.string.gsub(e,/([A-Z]+)([A-Z][a-z])/,"$1_$2"),e=n.string.gsub(e,/([a-z\d])([A-Z])/,"$1_$2"),e=n.string.gsub(e,/-/,"_"),e.toLowerCase()},s.dasherize=function(t){return n.string.gsub(t,/_/,"-")},s.demodulize=function(t){return n.string.gsub(t,/^.*\./,"")},s.foreign_key=function(t,e){return null==e&&(e=!0),s.underscore(s.demodulize(t))+(e?"_id":"id")},s.ordinalize=function(t){var e;if(t=parseInt(t),11===(e=Math.abs(t)%100)||12===e||13===e)return""+t+"th";switch(Math.abs(t)%10){case 1:return""+t+"st";case 2:return""+t+"nd";case 3:return""+t+"rd";default:return""+t+"th"}},s.uncountability=function(t){return s.inflections.uncountables.some(function(e,i,n){return null!=t.match(new RegExp("(\\b|_)"+e+"$","i"))})},s.pluralize=function(t){var e,i;if(i=t,""===t||s.uncountability(t))return i;for(var r=0;r<s.inflections.plurals.length&&(e=s.inflections.plurals[r],i=n.string.gsub(i,e[0],e[1]),null==t.match(e[0]));r++);return i},s.singularize=function(t){var e,i;if(e=t,""===t||s.uncountability(t))return e;for(var r=0;r<s.inflections.singulars.length&&(i=s.inflections.singulars[r],e=n.string.gsub(e,i[0],i[1]),!t.match(i[0]));r++);return e},s.humanize=function(t){var e,i;i=t;for(var r=0;r<s.inflections.humans.length;r++)e=s.inflections.humans[r],i=n.string.gsub(i,e[0],e[1]);return i=n.string.gsub(i,/_id$/,""),i=n.string.gsub(i,/_/," "),n.string.capitalize(i,!0)},s.titleize=function(t){var e;return e=s.humanize(s.underscore(t)),e=n.string.gsub(e,/[^a-zA-Z:']/," "),n.string.capitalize(e)},s.tableize=function(t){return s.pluralize(s.underscore(t))},s.classify=function(t){return s.camelize(s.singularize(n.string.gsub(t,/.*\./,"")))}},{"./inflections":6,"./util":9}],8:[function(t,e,i){e.exports=function(t){var e=function(t,e){String.prototype.__defineGetter__(t,e)},i=["__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__","charAt","constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf","charCodeAt","indexOf","lastIndexof","length","localeCompare","match","replace","search","slice","split","substring","toLocaleLowerCase","toLocaleUpperCase","toLowerCase","toUpperCase","trim","trimLeft","trimRight","gsub"];Object.keys(t).forEach(function(n){"inflect"!=n&&"inflections"!=n&&(-1!==i.indexOf(n)?console.log("warn: You should not override String.prototype."+n):e(n,function(){return t[n](this)}))})}},{}],9:[function(t,e,i){var n=e.exports={array:{del:function(t,e){var i=t.indexOf(e);return-1!=i?0==i?t.slice(1):t.slice(0,i).concat(t.slice(i+1)):t},first:function(t){return t[0]},last:function(t){return t[t.length-1]}},string:{gsub:function(t,e,i){var s,r,o,a,u,l,c;if(null==e||null==i)return n.string.value(t);for(l="",c=t;c.length>0;)if(r=c.match(e)){if(l+=c.slice(0,r.index),"function"==typeof i)r[1]=r[1]||r[0],l+=i(r);else if(i.match(/\$[1-9]/)){for(a=r,o=n.array.del(r,void 0);o!==a;)a=o,o=n.array.del(o,void 0);for(r[1]=r[1]||r[0],u=i,s=1;9>=s;s++)o[s]&&(u=n.string.gsub(u,new RegExp("\\$"+s),o[s]));l+=u}else l+=i;c=c.slice(r.index+r[0].length)}else l+=c,c="";return l},upcase:function(t){var e=n.string.gsub(t,/_([a-z])/,function(t){return"_"+t[1].toUpperCase()});return e=n.string.gsub(e,/\/([a-z])/,function(t){return"/"+t[1].toUpperCase()}),e[0].toUpperCase()+e.substr(1)},capitalize:function(t,e){var i=t.toLowerCase();return e||(i=n.string.gsub(i,/\s([a-z])/,function(t){return" "+t[1].toUpperCase()})),i[0].toUpperCase()+i.substr(1)},downcase:function(t){var e=n.string.gsub(t,/_([A-Z])/,function(t){return"_"+t[1].toLowerCase()});return e=n.string.gsub(e,/\/([A-Z])/,function(t){return"/"+t[1].toLowerCase()}),e[0].toLowerCase()+e.substr(1)},value:function(t){return t.substr(0)}}}},{}],10:[function(e,i,n){(function(s){!function(e){if("object"==typeof n&&"undefined"!=typeof i)i.exports=e();else if("function"==typeof t&&t.amd)t([],e);else{var r;r="undefined"!=typeof window?window:"undefined"!=typeof s?s:"undefined"!=typeof self?self:this,r.progenitor=e()}}(function(){return function t(i,n,s){function r(a,u){if(!n[a]){if(!i[a]){var l="function"==typeof e&&e;if(!u&&l)return l(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[a]={exports:{}};i[a][0].call(f.exports,function(t){var e=i[a][1][t];return r(e?e:t)},f,f.exports,t,i,n,s)}return n[a].exports}for(var o="function"==typeof e&&e,a=0;a<s.length;a++)r(s[a]);return r}({1:[function(t,e,i){var n,s=Object.prototype.hasOwnProperty,r=Object.prototype.toString,o=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===r.call(t)},a=function(t){"use strict";if(!t||"[object Object]"!==r.call(t))return!1;var e=s.call(t,"constructor"),i=t.constructor&&t.constructor.prototype&&s.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!e&&!i)return!1;var o;for(o in t);return o===n||s.call(t,o)};e.exports=function u(){"use strict";var t,e,i,s,r,l,c=arguments[0],f=1,h=arguments.length,d=!1;for("boolean"==typeof c?(d=c,c=arguments[1]||{},f=2):("object"!=typeof c&&"function"!=typeof c||null==c)&&(c={});h>f;++f)if(t=arguments[f],null!=t)for(e in t)i=c[e],s=t[e],c!==s&&(d&&s&&(a(s)||(r=o(s)))?(r?(r=!1,l=i&&o(i)?i:[]):l=i&&a(i)?i:{},c[e]=u(d,l,s)):s!==n&&(c[e]=s));return c}},{}],2:[function(t,e,i){var n=function(){},s=t("extend"),r={},o=function(t){return t.classMethods||(t.classMethods={}),t.classMethods.inherited||(t.classMethods.inherited=n),t.instanceMethods||(t.instanceMethods={}),t.instanceMethods.init||(t.instanceMethods.init=n),function(e,i,a){var u;if(u=r[e])return u;i=("function"==typeof i?i():i)||{},a=("function"==typeof a?a():a)||{},a.classMethods||(a.classMethods={}),u=function(e){"prototype-definition"!==e&&(t.instanceMethods.init.apply(this,arguments),p.init.apply(this,arguments))};var l=function(e){return t.classMethods[e]&&t.classMethods[e].apply(this,Array.prototype.slice.call(arguments,1))},c={"class":t,className:e,"super":l,progeny:o(u)},f=s({},t.classMethods,c,a.classMethods);s(u,u.classMethods=f);var h=function(e){return t.instanceMethods[e]&&t.instanceMethods[e].apply(this,Array.prototype.slice.call(arguments,1))},d={constructor:t,"class":u,className:e,"super":h,init:n},p=s({},t.instanceMethods,d,i);return u.prototype=new t("prototype-definition"),s(u.prototype,u.instanceMethods=p),t.classMethods.inherited.apply(t,[u]),r[e]=u}};i=e.exports=function(){Object.progeny||(Object.progeny=o(Object)),Error.progeny||(Error.progeny=o(Error))}},{extend:1}]},{},[2])(2)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{extend:3}],11:[function(t,e,i){function n(t){var e=t.id||t._id;this.persisted=!1,e?Document.Adapter.ids.isValid(e)?this.id=Document.Adapter.ids.next(e):"ObjectID"===e._bsontype?this.id=e:this.id=e.toString():null===e?this.id=null:this.id=Document.Adapter.ids.next(),this._data=a({_id:this.id},r(t,["id","_id"])),this._changes={}}function s(t){var e=new this({_id:null});return this.adapter()[t].call(this.adapter(),function(t){t=e["class"].shortToLong(t),e.kept(t)}),e}function r(t,e){var i={};for(var n in t)-1==e.indexOf(n)&&(i[n]=t[n]);return i}function o(t,e){if(!e||"object"!=typeof e)return e;var i={};return Object.keys(e).forEach(function(n){i[t[n]||n]=e[n]}),i}t("progenitor.js")();var a=t("extend"),u=t("i")(),l={},c=function(){};Document=Object.progeny("Document",{init:function(t,e){n.call(this,t),this.relation=e,this.RSVP={success:c,error:c},this.loaded=!1},isValid:function(){var t,e,i=!0,n=this["class"].validate||{},s=n.presence||[],r=n.format||{},o=Object.keys(r),a=n.custom||[];for(t=0;t<s.length;++t)if(!this.get(s[t])){i=!1;break}if(!i)return!1;for(t=0;t<o.length;++t)if(e=o[t],!r[e].test(this.get(e))){i=!1;break}for(t=0;t<a.length;++t)if(!a[t].call(this)){i=!1;break}return i},get:function(t){if("id"==t)return this.id;if(this["class"].belongsTo.indexOf(t)>=0){var e=this.get(u.foreign_key(t));return e&&Document[u.classify(t)].find(e)}return this["class"].namedFields[t]?this._data[t]||null:void 0},set:function(){var t,e,i,n=arguments[0],s=2==arguments.length,r={};if(arguments[0]){s&&(n={},n[arguments[0]]=arguments[1]);for(t in n){var o=this["class"].belongsTo.indexOf(t)>=0;if(o){var a=u.foreign_key(t);n[a]=n[t].id,t=a}(o||this["class"].namedFields[t])&&((e=this.get(t))!=(i=n[t])&&(this._changes[t]=[e,i]),"_id"===t&&(this.id=i),this._data[t]=r[t]=i)}return s?r[arguments[0]]:r}},changedAttributes:function(){return a({},this._changes)},save:function(){var t=this,e={},i=!this.isValid(),n=!Object.keys(this.changedAttributes()).length;return i||n&&this.persisted?(this.loaded=!0,this):(this.loaded=!1,this.relation=new Document.Relation(this["class"],this),this.persisted?(Object.keys(this._changes).forEach(function(i){e[i]=t.get(i)}),this.relation.update(e)):((this["class"].beforeCreate||[]).forEach(function(e){e.call(t)}),this.relation.create(a({},this._data))))},update:function(){return this.set.apply(this,arguments),this.save()},destroy:function(){var t=this;return this.loaded=!1,this["class"].adapter().remove({_id:this.id},function(e){t.loaded=!0,t.kept(t.isDestroyed=!!e)}),this},kept:function(t){this.set(t),this.loaded=!0,(this.RSVP.wasKept=!!t)?(this._changes={},this.persisted=!0,this.RSVP.success(this)):this.RSVP.error()},then:function(t,e){this.RSVP.success=t||c,this.RSVP.error=e||c,this.loaded&&(this.RSVP.wasKept?this.RSVP.success(this):this.RSVP.error())},asJSON:function(){for(var t,e={id:this.id.toString(),createdAt:this.get("createdAt"),updatedAt:this.get("updatedAt")},i=0;i<this["class"].allow.length;++i)if(t=this["class"].allow[i],/(.+)_id$/.test(t)){var n=this.get(t);e[t.slice(0,-3)]={id:n?n.toString():n}}else e[t]=this.get(t);return e}},{classMethods:{namedFields:null,shortFields:null,defaultFields:{ObjectID:{_id:"_id"},Date:{createdAt:"cT",updatedAt:"uT"}},adapter:function(){return l[this.className]||(l[this.className]=new Document.Adapter(this))},inherited:function(t){var e;this[t.className]=t,t.fields||(t.fields={}),t.belongsTo||(t.belongsTo=[]),t.fields.ObjectID=a({},this.defaultFields.ObjectID,t.fields.ObjectID),t.fields.Date=a({},this.defaultFields.Date,t.fields.Date),t.namedFields={},t.shortFields={},t.belongsTo.forEach(function(e){t.fields.ObjectID[u.foreign_key(e)]=e.slice(0,1)+"_id"});for(var i in t.fields)for(var n in e=t.fields[i])t.namedFields[n]=e[n],t.shortFields[e[n]]=n},find:function(t){var e;if(!t||"string"!=typeof t&&"ObjectID"!==t._bsontype)return new Document.Relation(this).find(t);this.loaded=!1,t=Document.Adapter.ids.isValid(t)?Document.Adapter.ids.next(t):t;var i=new Document.Relation(this,e=new this({_id:t}));return(e.relation=i).find()},count:function(){return new Document.Relation(this).count()},first:function(){return s.call(this,"first")},last:function(){return s.call(this,"last")},shortToLong:function(t){return o.call(this,this.shortFields,t)},longToShort:function(t){return o.call(this,this.namedFields,t)}}}),a(Document,{Relation:t("./relation"),Count:t("./count")}),i=e.exports=function(e){if(e=e||{},e.store||(e.store="memory"),-1=="memory mongo".split(" ").indexOf(e.store))throw new Error("Only the `memory` and `mongo` stores are available.");return Document.Adapter=t("./"+e.store+"_adapter"),Document}},{"./count":1,"./relation":2,extend:3,i:5,"progenitor.js":10}]},{},[11])(11)});